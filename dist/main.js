(()=>{"use strict";const e="558e6998c7d958821a0225b854f5e43b";function t(e,t){return new Date(e+1e3*(t+14400))}function n(e){return e.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric"})}(class{static async loadPage(o,a=""){const c=await async function(o,a=""){try{const a=await async function(t,n=""){try{const o=await fetch(`http://api.openweathermap.org/geo/1.0/direct?q=${t},${n}&limit=1&appid=${e}`),a=await o.json();return{longitude:a[0].lon,latitude:a[0].lat,name:a[0].name}}catch(e){return}}(o,""),c=a.longitude,r=a.latitude,s=a.name,i=await async function(t,n){const o=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${n}&lon=${t}&appid=${e}`);return await o.json()}(c,r),l=await async function(t,n){const o=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${n}&lon=${t}&exclude=&appid=${e}`);return await o.json()}(c,r),u=function(e,o){const a=t((new Date).getTime(),e.timezone);return{city:o,country:new Intl.DisplayNames(["en"],{type:"region"}).of(e.sys.country),weatherDesc:e.weather[0].description,currDate:a.toDateString(),currTime:n(a),currTemp:(e.main.temp-273.15).toFixed(1),wind:(3.6*e.wind.speed).toFixed(1),feels_like:(e.main.feels_like-273.15).toFixed(1),sunrise:n(t(1e3*e.sys.sunrise,e.timezone)),sunset:n(t(1e3*e.sys.sunset,e.timezone)),icon:`./imgs/weather-icons/${e.weather[0].icon}.svg`}}(i,s),d=function(e){const n=e.hourly.slice(0,25),o=[];return n.forEach((n=>{o.push({time:t(1e3*n.dt,e.timezone_offset).toLocaleTimeString("en-US",{hour:"numeric"}),icon:`./imgs/weather-icons/${n.weather[0].icon}.svg`,temp:(n.temp-273.15).toFixed(1)})})),o}(l),m=function(e){const n=e.daily.slice(1),o=[];return n.forEach((n=>{o.push({day:t(1e3*n.dt,e.timezone_offset).toLocaleDateString("en-US",{weekday:"long"}),icon:`./imgs/weather-icons/${n.weather[0].icon}.svg`,tempMin:(n.temp.min-273.15).toFixed(),tempMax:(n.temp.max-273.15).toFixed()})})),o}(l);return console.log(m),{todayMain:u,hourlyData:d,dailyData:m}}catch(e){console.log('Location not found.\nSearch must be in the form: "City", "City, State", or "City, Country"')}}(o,a);this.loadMainInfo(c.todayMain),this.loadHourlyForecast(c.hourlyData),this.loadDailyForecast(c.dailyData),this.initButtons()}static loadMainInfo(e){document.querySelector("#today-img").src=e.icon,document.querySelector("#location").textContent=`${e.city}, ${e.country}`,document.querySelector("#weather-type").textContent=e.weatherDesc,document.querySelector("#curr-date").textContent=e.currDate,document.querySelector("#curr-time").textContent=e.currTime,document.querySelector("#today-temp").textContent=e.currTemp+"°",document.querySelector("#wind-speed").textContent=e.wind+"km/h",document.querySelector("#feels-like").textContent=e.feels_like+"°",document.querySelector("#sunrise").textContent=e.sunrise,document.querySelector("#sunset").textContent=e.sunset}static loadHourlyForecast(e){const t=document.querySelector(".forecast-hourly");t.textContent="",e.forEach((e=>{t.appendChild(this.createHourlyForecastEntry(e))}))}static loadDailyForecast(e){const t=document.querySelector(".forecast-daily");t.textContent="",e.forEach((e=>{t.appendChild(this.createDailyForecastEntry(e))}))}static initButtons(){const e=document.querySelector(".forecast-hourly"),t=document.querySelector(".forecast-daily");e.addEventListener("wheel",(t=>{t.preventDefault(),e.scrollLeft+=t.deltaY})),t.addEventListener("wheel",(e=>{e.preventDefault(),t.scrollLeft+=e.deltaY})),document.querySelectorAll(".option-select").forEach((e=>{e.addEventListener("click",this.switchForecastMode)}))}static createHourlyForecastEntry(e){const t=document.createElement("div");return t.classList.add("forecast-entry"),t.innerHTML=`\n        <p class='time'>${e.time}</p>\n        <img src='${e.icon}' class='forecast-img'>\n        <p class='forecast-temp'>${e.temp}°</p>\n        `,t}static createDailyForecastEntry(e){const t=document.createElement("div");return t.classList.add("forecast-entry"),t.innerHTML=`\n        <p class='time'>${e.day}</p>\n        <img src='${e.icon}' class='forecast-img'>\n        <p class='forecast-temp'>${e.tempMax}°</p>\n        <p class='forecast-low'>${e.tempMin}°</p>\n        `,t}static switchForecastMode(e){e.target.classList.contains("selected")||(document.querySelector(".forecast-daily").classList.toggle("active"),document.querySelector(".forecast-hourly").classList.toggle("active"),document.querySelector("#hour-select").classList.toggle("selected"),document.querySelector("#daily-select").classList.toggle("selected"))}}).loadPage("Toronto")})();